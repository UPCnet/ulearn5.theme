<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="ulearn">
  <body>
        <div tal:define="ulearn_utils context/@@ulearn.utils" ng-controller="homeTopPageMenuButtons as ctrl">
            <div tal:condition="ulearn_utils/is_activate_sharedwithme" id="menusup" i18n:domain="ulearn">
                <nav>
                    <div class="row-fluid">
                        <div class="active bubble top col-md-4" ng-class="{active: ctrl.active_tab == 'stream'}">
                            <div class="arrow"></div>
                            <div class="bubble-content">
                                <a ng-click="ctrl.active_tab = 'stream'">
                                    <i class="fa fa-comment icons"></i>
                                    <tal:Entrada i18n:translate="Entrada"> Stream </tal:Entrada>
                                </a>
                            </div>
                        </div>
                        <div class="bubble top col-md-4" ng-class="{active: ctrl.active_tab == 'mycommunities'}">
                            <div class="arrow"></div>
                            <div class="bubble-content">
                                <a ng-click="ctrl.active_tab = 'mycommunities'">
                                    <i class="fa fa-group icons"></i>
                                    <tal:Documents i18n:translate="my_communities">My communities</tal:Documents>
                                </a>
                            </div>
                        </div>
                        <div class="bubble top col-md-4" ng-class="{active: ctrl.active_tab == 'sharedwithme'}">
                            <div class="arrow"></div>
                            <div class="bubble-content">
                                <a ng-click="ctrl.active_tab = 'sharedwithme'">
                                    <i class="fa fa-share-alt icons"></i>
                                    <tal:Documents i18n:translate="shared_with_me">Shared with me</tal:Documents>
                                </a>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
            <div tal:condition="not:ulearn_utils/is_activate_sharedwithme" id="menusup" i18n:domain="ulearn">
                <nav>
                    <div class="row">
                        <div class="active bubble top col-md-6" ng-class="{active: ctrl.active_tab == 'stream'}">
                            <div class="arrow"></div>
                            <div class="bubble-content">
                                <a ng-click="ctrl.active_tab = 'stream'">
                                    <i class="fa fa-comment icons"></i>
                                    <tal:Entrada i18n:translate="Entrada"> Stream </tal:Entrada>
                                </a>
                            </div>
                        </div>
                        <div class="bubble top col-md-6" ng-class="{active: ctrl.active_tab == 'mycommunities'}">
                            <div class="arrow"></div>
                            <div class="bubble-content">
                                <a ng-click="ctrl.active_tab = 'mycommunities'">
                                    <i class="fa fa-group icons"></i>
                                    <tal:Documents i18n:translate="my_communities">My communities</tal:Documents>
                                </a>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
            <div ng-switch="ctrl.active_tab">
                <div id="maxui-widget-container" ng-hide="ctrl.active_tab !== 'stream'"></div>
                <div id="communities-view" ng-switch-when="mycommunities">
                    <div id="communities-view" ng-controller="AllCommunities as ctrl">
                        <section id="communitylist">
                            <ul>
                                <li dir-paginate="community in ctrl.user_communities | filter:q | itemsPerPage: ctrl.pageSize" current-page="ctrl.currentPage" ng-cloak>
                                    <div class="row-fluid">
                                        <div class="col-md-2">
                                            <a ng-href="{{community.url}}">
                                                <img ng-if="community.image" ng-src="{{community.url}}/@@images/image/thumb" />
                                                <img ng-if="!community.image" src="/++ulearn++static/images/avatar_default.png" />
                                            </a>
                                        </div>
                                        <div class="col-md-10">
                                            <a ng-href="{{community.url}}">
                                                <h4>{{community.title}}</h4>
                                                <p>{{community.description}}</p>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="community-actions">
                                        <a class="community-action community-favorite community-icon-" ng-class="{'community-favorited': community.favorited}" ng-click="ctrl.toggleFavorite(community)">
                                           favorite
                                        </a>
                                        <a class="community-action community-subscribe community-icon-" ng-if="!ctrl.is_subscribed(community.url)" ng-class="{'community-subscribed': ctrl.is_subscribed(community.url)}" ng-click="ctrl.subscribe(community)" ng-cloak>
                                           subscribe
                                        </a>
                                        <a class="community-action community-subscribe community-icon-" ng-if="ctrl.is_subscribed(community.url) && !(community.type === 'Organizative')" ng-class="{'community-subscribed': ctrl.is_subscribed(community.url)}" ng-click="ctrl.unSubscribe(community)" ng-cloak>
                                           unsubscribe
                                        </a>
                                        <a class="community-action community-edit community-icon-" ng-if="community.can_manage" ng-href="{{community.url}}/edit">edit</a>
                                        <a class="community-action community-delete community-icon-" ng-if="community.can_manage" ng-click="ctrl.delete(community)">delete</a>
                                    </div>
                                </li>
                            </ul>
                        </section>
                        <div class="pagination">
                            <dir-pagination-controls boundary-links="true" template-url="/++components++ulearn/angular-utils-pagination/dirPagination.tpl.html"></dir-pagination-controls>
                        </div>
                    </div>
                </div>

            </div>
        </div>
  </body>
</html>

