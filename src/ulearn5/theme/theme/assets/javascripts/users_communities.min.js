$.urlParam=function(e){var n=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return!!n&&n[1]},$(document).ready(function(){setTimeout(function(){$(".userSearch").select2({allowClear:!0,placeholder:" ",minimumInputLength:3,ajax:{url:portal_url+"/ulearn.ajaxusersearch",data:function(e,n){return{q:e,page:n}},results:function(e,n){return e}},initSelection:function(e,n){var o=$(e).val();$.ajax(portal_url+"/ulearn.fromusername2displayname",{data:{q:o}}).done(function(e){n(e)})}})},100),$.urlParam("user")?($(".typeSearch").val("user"),$(".communityBlock").hide(),$(".userBlock").show()):$.urlParam("idcommunity")?($(".typeSearch").val("community"),$(".communityBlock").show(),$(".userBlock").hide(),$(".communitySearch").val($.urlParam("idcommunity"))):($(".typeSearch").val("user"),$(".communityBlock").hide(),$(".userBlock").show()),$(".typeSearch").on("change",function(){var e=$(this).val();"user"==e?($(".communityBlock").hide(),$(".userBlock").show()):("community"==e?$(".communityBlock").show():$(".communityBlock").hide(),$(".userBlock").hide())}),$(".searchFilters input.search").on("click",function(){var e=$(".typeSearch").val(),n=window.location.href.replace("#/","");if(index=n.indexOf("?"),-1!=index&&(n=n.substring(0,index)),"user"==e){var o=$(".userSearch").select2("val");0<o.length&&(window.location=n+"?user="+o)}else"community"==e?window.location=n+"?idcommunity="+$(".communitySearch").val():"all"==e&&(n=n.split("/users_communities")[0],window.open(n+"/export_users_communities","_blank"))})});